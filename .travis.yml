language: scala
scala:
- 2.12.8
jdk:
- oraclejdk8
script:
- make build
- |
  if [ "$TRAVIS_BRANCH" = "master" -a "$TRAVIS_PULL_REQUEST" = "false" ]; then
    echo "dump change list"
    FILES=`git diff $(git log --first-parent master --oneline |cut -f1 -d' '|head -n2|tac|awk '{if(NR%2)ORS="...";else ORS="";print}') --name-only`
    echo $FILES
    echo $FILES| grep -E '^src|azure|build\.sbt'&& make deploy/azure AZURE_DEPLOY_USER=$AZURE_DEPLOY_USER AZURE_DEPLOY_PASSWORD=$AZURE_DEPLOY_PASSWORD AZURE_DEPLOY_SITE=$AZURE_DEPLOY_SITE || echo 'no deploy for Azure'
  fi

AZURE_DEPLOY_USER:
  secure: gzkmT5S8WqKmqK3O7evf8BLTvYU/NIj64OUT7pZUKnvniHP0iO9J+9PPxQBnTL4JcXzdQYyPrBmb/uSmbnt/sNkLmdHq4c0Mes5Biwsij0IlJh4CHC/agDdmuwecYdvBIPIVyVkBtYjN62QPKfLmthby4zAB1OKAK5EUBOEpKg04gNhZELCNGEGGuX8OtTqW2r8r5/CShLk96AXolVcsAe/2oBMPeIXRW6R3ZYN+uTAZUUICqUbPVuF0ge6FKSxorwZFbfNNAsEE3biuxWP9Cg+5XaIEBSus9kzlqr7xyz88NJn1RUFIt8nKTvB8edvOX4p7+9MkSOGWi7MrQj2eknLEDCyN256KnfZ+5kt2EjiBexOr9RAUXon0A1oJqKF2xiLY1NH3mIEEpEfqNxODd67m1SEoaNmYsUY6P0ynBmzjvLfHKmFhyZTDZrTBx2TSasH4ShakeJhk0rfunCA26lYwwiRp8CUh4ry2gLNYIL1UrerasstGRkQQu4puHa09BiR/JfPfnY8Y0jqQ4NvMZ24Sp9ynLAZV3e+dHs37koMSJzbNvhOqvNTWJA6MO0giI2q9I7YOCWKJvFaU0dAoiTjJTMJpPfjLI6+2SODfMkB9zyWDvZjUmwIDRyKtyeABmdoyTUy1bHCLLA1c0Gnpv1Xa4vsXmmQXkVFaP+4EePc=
AZURE_DEPLOY_PASSWORD:
  secure: HoOkHhwacX0985a8WJZGSXUphbO7QVUc60308W+TzCNpGDPvgNVwzOAATAeO1ITrdi3bNRSrdjoOyc4X8XpYjrjm5XclMhMiIDdLvUg5vebG6V0v5zyIiBHRblju9qaUTsRcM9lbZtm1ox9DiUWT5IhCWQpQZhdbGJ+GwvH7ebx/shsxITB0XQ8ueTP8DfsQOjwmk0qDqLgyA0jnT1IM8DB/WH15HQZ1SBjDrbUcwptOozb0QHcry5Jktj8T3UCZY+srr8SdjyCDSGj/UXVT3eWnBGI2QU+uA15g4xlSXEUwy4i7BWIkgO/stCz/PksSMQlWlqo3+5PSb+by+/nP/Vq6TCJWhlxv+PaqzZ5m/PrbTEVLqESykSSblkL43Yr9Ew9DY0QypRZoODAo6MFfLI9MtaLDj9S0XCQzxGkTr4gFPMRJ1CzUtIX0EHrJ3XZnwMsDKaX3yPozTOj549p15skIN/+Oxx+LhaA5cCFDvxcTwyDl8AgQpaIUQiZIqPZbpd1UeeL3n3u+RTWa0y6t1DkddrHG0DV3uNAs+Lu15NjkImRo6NUoswua/fL1yoOKEB+WtHFFWDFDPkWZjlEhGxb4WeNOOJ9RHqryr4fpPzVmB88+l+y3ktZcnqXly83DvkZAXlijVE9fJnLm9q31S/Py1VU/yZLvwIcJ+fJCBtc=
AZURE_DEPLOY_SITE:
  secure: Xbzk3cf9MC66yBCN5l3sgn2NRAFFecGn6UTs+A5o91Fnk5ZVzOeVpHeuq5pDTwUikRbNJmoQ2qSH1Viq+l3nhXHmgjZuYYC1Iy4XAKZO9O1WGpRIMYkQLNoFFgQB2d/6KxtMss1kExx7p/pLh+qXj2DagzSCGleb6lczOQs4yk8zoZySeob5YTT0gRWNkw0dGxMaFkEPvliDlu8cioKe2aHMSecTL6u2eak4pavheaQK4m/te0YvG6Wv0hzMSJ6k/Vym7tj34eQ8bphwnM7hJXs+NcqhPGo9GFQJA25of0Le0byx/j1xtuLkSqzLUimYW65Bg+ZUPAq8rxN4Stox7UWEtGIS63tBmpoprMBl2UUamw9k5l0siiMZGxrAgCuEH4H+Jv8OybINe/3pdV11pjekxmCB/PHBw1uE1sca553nsElG2eRTnLV8XbNjIXOG24Ac2h7LW59GR7HcDaViwjo6qbZyDCS/i+ut+1Gf6h3xdyD0TOS9DthS+0epnXAyFtPFJBVKDlKGttDfCentMJnpLtXe12r1oRS7D+QycUCMdLlpB8TEh7EWsWsO9nOiHfWvGeTVuy3ZrxwH5ITygPhXcud7NZbXcSCWu0IK03AcKYhExFKeE7hB0WLrwvwaRy5cBRuWYWk58ULogks2fFrmps5l5fWU6pDOBmFJ80Y=
